= Проект WEBFILE.MKB.RU =
Защищённое файловое хранилище

== Бизнес требование ==
Разработать хранилище для защищённого обмена файлами как внутри организации, так и за её пределами.

== Техническое задание ==
=== Загрузка ===
Веб-интерфейс с кнопкой «выбрать файл» и кнопкой «отправить».

=== Прогресс загрузки ===
Представляет собой таблицу со шкалой общего прогресса. По завершении – предложение заполнить обязательные поля «От» (email), «Кому» (email), «Описание» (строка) и произвольное поле «Примечание» (многострочный текст). В поле «Кому» должна быть возможность вписать несколько почтовых адресов.

=== Подтверждение адреса отправителя ===
После ввода на почтовый адрес отправителя отправляется письмо со ссылками для подтверждения отправки и удаления. После этого на почтовый адрес получателя отправляется письмо со ссылкой для скачивания файла.

=== Скачивание ===
По ссылке для скачивания выводится прямая ссылка для скачивания, действительная 12 часов. После скачивания отправителю отправляется письмо с сообщением, что получатель его скачал.

=== Хранение ===
В файловой системе файлы хранятся в структуре, построенной на основе уникального идентификатора (последовательный номер записи в базе данных). Имя файла хранится в базе данных.
Пример: файл номер 1AFE6 хранится как файл /files/E6/AF/1A.

=== Удаление файлов ===
В письме после первого скачивания отправителю предлагается ссылка для удаления файла. Через месяц после размещения файл удаляется, отправителю направляется уведомления с количеством скачивания этого файла за время его хранения.

=== Развитие - фаза 2 ===
==== Регистрация и восстановление доступа ====
Требуется только для внешних контрагентов. Авторизация по email и паролю. 

==== Авторизация ====
Внутренние пользователи должны авторизоваться при входе на главную страницу хранилища автоматически при помощи LDAP. Внешние пользователи вводят почтовый адрес и пароль. После внедрения механизма авторизации доступ к файлам будет предоставляться только тем, кто указан получателем в явном виде.

==== Список файлов пользователя ====
Авторизованные пользователи видят вкладку с «отправленными» и «полученными» файлами.  Отправленные файлы можно будет удалить, полученные – скачать повторно.

=== Развитие – фаза 3 ===
==== Папки ====
В файловой системе организуются так же (/files/E6/AF/1A), но внутри сохраняются имена файлов и, при необходимости, поддиректории. В веб-интерфейсе папку можно только целиком забрать ZIP-архивом. Создаётся пустым, предназначается для использования в качестве долговременного канала файлового обмена. По сути, является общей директорией для отправителя и получателя, где они могут создавать, удалять, переименовывать файлы для последующей синхронизации при помощи стороннего ПО.

==== Альтернативные интерфейсы ====
Предоставить технологический интерфейс WebDAV с авторизацией при помощи адреса электронной почты и сгенерированного ключа, который включается в письмо получателю и отправителю. Штатными средствами операционной системы (как в Windows, так и в Linux) папка монтируется в файловую систему рабочих станций/серверов.  При отсутствии активности по истечении срока хранения владельцу папки отправляется предложение перейти по ссылке удаления папки или продлить доступ на значимый период времени (год, к примеру). При отсутствии реакции письма отправляются повторно. Без ограничения количества повторных уведомлений.
